<ion-header>
  <ion-navbar color="primary">
    <ion-title>Fazer uma reserva</ion-title>
  </ion-navbar>
</ion-header>


<ion-content >
  <ion-card>
  <form [formGroup]="reservaForm"  novalidate>
    <ion-card-content>
    <ion-list>
      <ion-item>
        <ion-icon item-start name="person"></ion-icon>
        <ion-label floating>Usuário</ion-label>
        <ion-input readonly="true" [(ngModel)]="login.nome" formControlName="usuario"></ion-input>
      </ion-item>
      <ion-item>
        <ion-icon item-start name="calendar"></ion-icon>
        <ion-label>Data</ion-label>
        <ion-datetime
          [(ngModel)] = "reserva.data_reserva"
          displayFormat="DD/MM/YYYY"
          pickerFormat="YYYY-MM-DD"
          monthShortNames="Jan, Fev, Mar, Abr, Mai, Jun, Jul, Ago, Set, Out, Nov, Dez"
          doneText="Selecionar"
          cancelText="Cancelar"
          formControlName="data"
          [min]="hoje"
          [max]="dataDocente">
        </ion-datetime>
      </ion-item>
      <ion-item>
        <ion-icon item-start name="clock"></ion-icon>
        <ion-label>Período</ion-label>
        <ion-select  okText="Selecionar" cancelText="Cancelar" [(ngModel)] = "reserva.periodo"
          formControlName="periodo">
          <ion-option >07:45-08:35</ion-option>
          <ion-option >08:35-09:25</ion-option>
          <ion-option >09:40-10:30</ion-option>
          <ion-option >10:30-11:20</ion-option>
          <ion-option >11:20-12:10</ion-option>
          <ion-option >13:30-14:20</ion-option>
          <ion-option >14:20-15:10</ion-option>
          <ion-option >15:30-16:20</ion-option>
          <ion-option >16:20-17:10</ion-option>
          <ion-option >17:10-18:00</ion-option>
        </ion-select>
      </ion-item>
      <ion-item>
        <ion-icon item-start name="pricetag"></ion-icon>
        <ion-label>Uso</ion-label>
        <ion-select  okText="Selecionar" cancelText="Cancelar" [(ngModel)] = "reserva.tipo_uso"
          formControlName="uso" (ionChange)="changeUso($event)">
          <ion-option *ngIf="login.privilegio == 'Docente' || login.privilegio == 'Secretário'" >Prática</ion-option>
          <ion-option *ngIf="login.privilegio == 'Docente' || login.privilegio == 'Secretário'" >Teórica</ion-option>
          <ion-option *ngIf="login.privilegio == 'Secretário'">Mestrado</ion-option>
          <ion-option *ngIf="login.privilegio == 'Secretário'">Especialização</ion-option>
          <ion-option *ngIf="login.privilegio == 'Secretário'">Defesa</ion-option>
          <ion-option *ngIf="login.privilegio == 'Secretário'">Minicurso</ion-option>
          <ion-option *ngIf="login.privilegio == 'Secretário'">Reunião</ion-option>
        </ion-select>
      </ion-item>
      <ion-item>
        <ion-icon item-start name="home"></ion-icon>
        <ion-label>Departamento</ion-label>
        <ion-select  okText="Selecionar" cancelText="Cancelar" formControlName="departamento" [(ngModel)] = "departamentoSelecionado"
          (ionChange)="changeDepartamento($event)" required>
          <ion-option *ngFor="let departamento of departamentos" [value]="departamento">{{departamento.nome}}</ion-option>
        </ion-select>
      </ion-item>
      <ion-item>
        <ion-icon item-start name="book"></ion-icon>
        <ion-label>Disciplina</ion-label>
        <ion-select  okText="Selecionar" cancelText="Cancelar" formControlName="disciplina" [(ngModel)] = "reserva.id_disciplina"
          [disabled]="disciplinaDisabled">
          <ion-option *ngFor="let disciplina of disciplinas" [value]="disciplina.id">{{disciplina.nome}}</ion-option>
        </ion-select>
      </ion-item>
      <ion-item>
        <ion-icon item-start name="key"></ion-icon>
        <ion-label>Sala</ion-label>
        <ion-select  okText="Selecionar" cancelText="Cancelar" formControlName="sala" [(ngModel)] = "reserva.id_sala">
          <ion-option *ngFor="let sala of salas" [value]="sala.id">{{sala.numero}}</ion-option>
        </ion-select>
      </ion-item>
      <ion-item>
        <ion-icon item-start name="list-box"></ion-icon>
        <ion-label>Tipo de reserva</ion-label>
        <ion-select  okText="Selecionar" cancelText="Cancelar" [(ngModel)] = "reserva.tipo_reserva"
          formControlName="tipoReserva">
          <ion-option *ngIf="login.privilegio == 'Docente' || login.privilegio == 'Secretário'">Eventual</ion-option>
          <ion-option *ngIf="login.privilegio == 'Secretário'">Fixo</ion-option>
        </ion-select>
      </ion-item>
    </ion-list>
  </ion-card-content>
  </form>
  <hr />
    <button ion-button round class="btnReserva" (click)="reservaCreate()" >Reservar</button>
    <button ion-button round class="btnCancelar" (click)="reservaCanceled()">Cancelar</button>
  </ion-card>
</ion-content>
